---
source: plinky/linktest/harness/tests.rs
---
linking exited with exit status: 0

no stdout present

=== stderr ===
debug print: loaded object
 │
 │  class: Elf64, endian: Little, abi: SystemV, machine: X86_64
 │
 │  section .comment#14 (no perms) in <plinky>
 │   │
 │   │  zero-terminated strings should be deduplicated
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 4c 69 6e 6b 65 72 3a 20 70 6c 69 6e 6b 79 00 │ Linker: plinky. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .rodata#1 (perms: r) in goodbye.o
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 47 6f 6f 64 62 79 65 20 77 6f 72 6c 64 21 0a │ Goodbye world!. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .rodata#8 (perms: r) in hello.o
 │   │
 │   │  ╭────────────────────────────────────────┬───────────────╮
 │   │  │ 48 65 6c 6c 6f 20 77 6f 72 6c 64 21 0a │ Hello world!. │
 │   │  ╰────────────────────────────────────────┴───────────────╯
 │   ┴
 │
 │  section .text#2 (perms: rx) in goodbye.o
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 00 00 00 00 ba │ ................ │
 │   │  │ 0f 00 00 00 cd 80 b0 01 bb 00 00 00 00 cd 80    │ ...............  │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   │
 │   │    Relocations:
 │   │  ╭───────────┬─────────────────────┬────────┬────────╮
 │   │  │ Type      │ Symbol              │ Offset │ Addend │
 │   │  ├───────────┼─────────────────────┼────────┼────────┤
 │   │  │ X86_64_32 │ <section .rodata#1> │ 0xb    │ 0x0    │
 │   │  ╰───────────┴─────────────────────┴────────┴────────╯
 │   ┴
 │
 │  section .text#9 (perms: rx) in hello.o
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 00 00 00 00 ba │ ................ │
 │   │  │ 0d 00 00 00 cd 80 e9 00 00 00 00                │ ...........      │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   │
 │   │    Relocations:
 │   │  ╭─────────────┬─────────────────────┬────────┬────────────────────╮
 │   │  │ Type        │ Symbol              │ Offset │ Addend             │
 │   │  ├─────────────┼─────────────────────┼────────┼────────────────────┤
 │   │  │ X86_64_32   │ <section .rodata#8> │ 0xb    │ 0x0                │
 │   │  ├─────────────┼─────────────────────┼────────┼────────────────────┤
 │   │  │ X86_64_PC32 │ goodbye#10          │ 0x17   │ 0xfffffffffffffffc │
 │   │  ╰─────────────┴─────────────────────┴────────┴────────────────────╯
 │   ┴
 │
 │    Symbols:
 │  ╭─────────────────────┬─────────┬───────────┬────────────┬─────────────────╮
 │  │ Name                │ Type    │ Source    │ Visibility │ Value           │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <symbol#0>          │ none    │ <plinky>  │ local      │ <null>          │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .rodata#1> │ section │ goodbye.o │ local      │ .rodata#1 + 0x0 │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .text#2>   │ section │ goodbye.o │ local      │ .text#2 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .rodata#8> │ section │ hello.o   │ local      │ .rodata#8 + 0x0 │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .text#9>   │ section │ hello.o   │ local      │ .text#9 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ _start#2            │ none    │ hello.o   │ global     │ .text#9 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ goodbye#10          │ none    │ goodbye.o │ global     │ .text#2 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ len#8               │ none    │ goodbye.o │ local      │ 0xf             │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ len#16              │ none    │ hello.o   │ local      │ 0xd             │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ msg#7               │ none    │ goodbye.o │ local      │ .rodata#1 + 0x0 │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ msg#15              │ none    │ hello.o   │ local      │ .rodata#8 + 0x0 │
 │  ╰─────────────────────┴─────────┴───────────┴────────────┴─────────────────╯
 ┴

debug print: calculated layout
 │
 │    Sections:
 │  ╭─────────────┬───────────────┬────────────────╮
 │  │ Section     │ Source object │ Memory address │
 │  ├─────────────┼───────────────┼────────────────┤
 │  │ .rodata#1   │ goodbye.o     │ 0x400000       │
 │  ├─────────────┼───────────────┼────────────────┤
 │  │ .rodata#8   │ hello.o       │ 0x40000f       │
 │  ├─────────────┼───────────────┼────────────────┤
 │  │ .text#2     │ goodbye.o     │ 0x401000       │
 │  ├─────────────┼───────────────┼────────────────┤
 │  │ .text#9     │ hello.o       │ 0x40101f       │
 │  ├─────────────┼───────────────┼────────────────┤
 │  │ .comment#14 │ <plinky>      │ not allocated  │
 │  ╰─────────────┴───────────────┴────────────────╯
 │
 │    Segments:
 │  ╭──────────┬──────┬────────┬─────────┬────────────────────┬───────────╮
 │  │ Start    │ Size │ Align  │ Type    │ Permissions        │ Sections  │
 │  ├──────────┼──────┼────────┼─────────┼────────────────────┼───────────┤
 │  │ 0x400000 │ 0x1c │ 0x1000 │ program │ ElfPermissions(R)  │ .rodata#1 │
 │  │          │      │        │         │                    │ .rodata#8 │
 │  ├──────────┼──────┼────────┼─────────┼────────────────────┼───────────┤
 │  │ 0x401000 │ 0x3a │ 0x1000 │ program │ ElfPermissions(RX) │ .text#2   │
 │  │          │      │        │         │                    │ .text#9   │
 │  ╰──────────┴──────┴────────┴─────────┴────────────────────┴───────────╯
 ┴

debug print: object after relocations are applied
 │
 │  class: Elf64, endian: Little, abi: SystemV, machine: X86_64
 │
 │  section .comment#14 (no perms) in <plinky>
 │   │
 │   │  zero-terminated strings should be deduplicated
 │   │
 │   │  not allocated in the resulting memory
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 4c 69 6e 6b 65 72 3a 20 70 6c 69 6e 6b 79 00 │ Linker: plinky. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .rodata#1 (perms: r) in goodbye.o
 │   │
 │   │  address: 0x400000
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 47 6f 6f 64 62 79 65 20 77 6f 72 6c 64 21 0a │ Goodbye world!. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .rodata#8 (perms: r) in hello.o
 │   │
 │   │  address: 0x40000f
 │   │
 │   │  ╭────────────────────────────────────────┬───────────────╮
 │   │  │ 48 65 6c 6c 6f 20 77 6f 72 6c 64 21 0a │ Hello world!. │
 │   │  ╰────────────────────────────────────────┴───────────────╯
 │   ┴
 │
 │  section .text#2 (perms: rx) in goodbye.o
 │   │
 │   │  address: 0x401000
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 00 00 40 00 ba │ .............@.. │
 │   │  │ 0f 00 00 00 cd 80 b0 01 bb 00 00 00 00 cd 80    │ ...............  │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │  section .text#9 (perms: rx) in hello.o
 │   │
 │   │  address: 0x40101f
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 0f 00 40 00 ba │ .............@.. │
 │   │  │ 0d 00 00 00 cd 80 e9 c6 ff ff ff                │ ...........      │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │    Symbols:
 │  ╭─────────────────────┬─────────┬───────────┬────────────┬─────────────────╮
 │  │ Name                │ Type    │ Source    │ Visibility │ Value           │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <symbol#0>          │ none    │ <plinky>  │ local      │ <null>          │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .rodata#1> │ section │ goodbye.o │ local      │ .rodata#1 + 0x0 │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .text#2>   │ section │ goodbye.o │ local      │ .text#2 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .rodata#8> │ section │ hello.o   │ local      │ .rodata#8 + 0x0 │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ <section .text#9>   │ section │ hello.o   │ local      │ .text#9 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ _start#2            │ none    │ hello.o   │ global     │ .text#9 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ goodbye#10          │ none    │ goodbye.o │ global     │ .text#2 + 0x0   │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ len#8               │ none    │ goodbye.o │ local      │ 0xf             │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ len#16              │ none    │ hello.o   │ local      │ 0xd             │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ msg#7               │ none    │ goodbye.o │ local      │ .rodata#1 + 0x0 │
 │  ├─────────────────────┼─────────┼───────────┼────────────┼─────────────────┤
 │  │ msg#15              │ none    │ hello.o   │ local      │ .rodata#8 + 0x0 │
 │  ╰─────────────────────┴─────────┴───────────┴────────────┴─────────────────╯
 ┴

debug print: built elf
 │
 │    Metadata:
 │  ╭────────────┬────────────╮
 │  │ Class      │ ELF 64bit  │
 │  ├────────────┼────────────┤
 │  │ Endian     │ Little     │
 │  ├────────────┼────────────┤
 │  │ ABI        │ System V   │
 │  ├────────────┼────────────┤
 │  │ Machine    │ x86-64     │
 │  ├────────────┼────────────┤
 │  │ Type       │ Executable │
 │  ├────────────┼────────────┤
 │  │ Entrypoint │ 0x40101f   │
 │  ╰────────────┴────────────╯
 │
 │  section #0 (address: 0x0)
 │   │
 │   │  empty section
 │   ┴
 │
 │  section .shstrtab#1 (address: 0x0)
 │   │
 │   │    Strings table:
 │   │  ╭──────┬───────────╮
 │   │  │ 0x0  │           │
 │   │  ├──────┼───────────┤
 │   │  │ 0x1  │ .rodata   │
 │   │  ├──────┼───────────┤
 │   │  │ 0x9  │ .text     │
 │   │  ├──────┼───────────┤
 │   │  │ 0xf  │ .rodata   │
 │   │  ├──────┼───────────┤
 │   │  │ 0x17 │ .text     │
 │   │  ├──────┼───────────┤
 │   │  │ 0x1d │ .comment  │
 │   │  ├──────┼───────────┤
 │   │  │ 0x26 │ .shstrtab │
 │   │  ╰──────┴───────────╯
 │   ┴
 │
 │  section .rodata#2 (address: 0x400000)
 │   │
 │   │  program data | permissions: R
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 47 6f 6f 64 62 79 65 20 77 6f 72 6c 64 21 0a │ Goodbye world!. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .text#3 (address: 0x401000)
 │   │
 │   │  program data | permissions: R X
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 00 00 40 00 ba │ .............@.. │
 │   │  │ 0f 00 00 00 cd 80 b0 01 bb 00 00 00 00 cd 80    │ ...............  │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │  section .rodata#4 (address: 0x40000f)
 │   │
 │   │  program data | permissions: R
 │   │
 │   │  ╭────────────────────────────────────────┬───────────────╮
 │   │  │ 48 65 6c 6c 6f 20 77 6f 72 6c 64 21 0a │ Hello world!. │
 │   │  ╰────────────────────────────────────────┴───────────────╯
 │   ┴
 │
 │  section .text#5 (address: 0x40101f)
 │   │
 │   │  program data | permissions: R X
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 0f 00 40 00 ba │ .............@.. │
 │   │  │ 0d 00 00 00 cd 80 e9 c6 ff ff ff                │ ...........      │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │  section .comment#6 (address: 0x0)
 │   │
 │   │  program data | permissions: -   | deduplicating zero-terminated strings
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 4c 69 6e 6b 65 72 3a 20 70 6c 69 6e 6b 79 00 │ Linker: plinky. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │    Segments:
 │  ╭───────────┬───────┬──────────┬──────────────────────╮
 │  │ Type      │ Perms │ Aligment │ Content              │
 │  ├───────────┼───────┼──────────┼──────────────────────┤
 │  │ Load      │ R     │ 0x1000   │ .rodata#2, .rodata#4 │
 │  ├───────────┼───────┼──────────┼──────────────────────┤
 │  │ Load      │ R X   │ 0x1000   │ .text#3, .text#5     │
 │  ├───────────┼───────┼──────────┼──────────────────────┤
 │  │ GNU stack │ RW    │ 0x1      │ -                    │
 │  ╰───────────┴───────┴──────────┴──────────────────────╯
 ┴




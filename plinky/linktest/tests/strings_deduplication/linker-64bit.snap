---
source: plinky/linktest/harness/tests.rs
---
linking exited with exit status: 0

no stdout present

=== stderr ===
debug print: calculated layout
 │
 │    Sections:
 │  ╭─────────────────────┬────────────────────────┬────────────────╮
 │  │ Section             │ Source object          │ Memory address │
 │  ├─────────────────────┼────────────────────────┼────────────────┤
 │  │ .custom_messages#15 │ mix of foo.o and bar.o │ 0x400000       │
 │  ├─────────────────────┼────────────────────────┼────────────────┤
 │  │ .text#2             │ foo.o                  │ 0x401000       │
 │  ├─────────────────────┼────────────────────────┼────────────────┤
 │  │ .text#9             │ bar.o                  │ 0x401031       │
 │  ├─────────────────────┼────────────────────────┼────────────────┤
 │  │ .comment#14         │ <plinky>               │ not allocated  │
 │  ╰─────────────────────┴────────────────────────┴────────────────╯
 │
 │    Segments:
 │  ╭──────────┬──────┬────────┬─────────┬────────────────────┬─────────────────────╮
 │  │ Start    │ Size │ Align  │ Type    │ Permissions        │ Sections            │
 │  ├──────────┼──────┼────────┼─────────┼────────────────────┼─────────────────────┤
 │  │ 0x400000 │ 0x17 │ 0x1000 │ program │ ElfPermissions(R)  │ .custom_messages#15 │
 │  ├──────────┼──────┼────────┼─────────┼────────────────────┼─────────────────────┤
 │  │ 0x401000 │ 0x69 │ 0x1000 │ program │ ElfPermissions(RX) │ .text#2             │
 │  │          │      │        │         │                    │ .text#9             │
 │  ╰──────────┴──────┴────────┴─────────┴────────────────────┴─────────────────────╯
 │
 │    deduplication facade .custom_messages#1 in foo.o
 │  ╭──────┬───────────────────────────╮
 │  │ From │ To                        │
 │  ├──────┼───────────────────────────┤
 │  │ 0x0  │ .custom_messages#15 + 0x0 │
 │  ├──────┼───────────────────────────┤
 │  │ 0x6  │ .custom_messages#15 + 0x6 │
 │  ╰──────┴───────────────────────────╯
 │
 │    deduplication facade .custom_messages#8 in bar.o
 │  ╭──────┬───────────────────────────╮
 │  │ From │ To                        │
 │  ├──────┼───────────────────────────┤
 │  │ 0x0  │ .custom_messages#15 + 0xf │
 │  ├──────┼───────────────────────────┤
 │  │ 0x8  │ .custom_messages#15 + 0x6 │
 │  ╰──────┴───────────────────────────╯
 ┴

debug print: object after relocations are applied
 │
 │  section .custom_messages#15 (perms: r) in mix of foo.o and bar.o
 │   │
 │   │  zero-terminated strings should be deduplicated
 │   │
 │   │  address: 0x400000
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ 48 65 6c 6c 6f 00 20 77 6f 72 6c 64 21 0a 00 47 │ Hello. world!..G │
 │   │  │ 6f 6f 64 62 79 65 00                            │ oodbye.          │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │  section .text#2 (perms: rx) in foo.o
 │   │
 │   │  address: 0x401000
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 00 00 40 00 ba │ .............@.. │
 │   │  │ 05 00 00 00 cd 80 b8 04 00 00 00 bb 01 00 00 00 │ ................ │
 │   │  │ b9 06 00 40 00 ba 08 00 00 00 cd 80 e9 00 00 00 │ ...@............ │
 │   │  │ 00                                              │ .                │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │  section .text#9 (perms: rx) in bar.o
 │   │
 │   │  address: 0x401031
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ b8 04 00 00 00 bb 01 00 00 00 b9 0f 00 40 00 ba │ .............@.. │
 │   │  │ 07 00 00 00 cd 80 b8 04 00 00 00 bb 01 00 00 00 │ ................ │
 │   │  │ b9 06 00 40 00 ba 08 00 00 00 cd 80 b8 01 00 00 │ ...@............ │
 │   │  │ 00 bb 00 00 00 00 cd 80                         │ ........         │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 ┴

debug print: built elf
 │
 │    Metadata:
 │  ╭────────────┬────────────╮
 │  │ Class      │ ELF 64bit  │
 │  ├────────────┼────────────┤
 │  │ Endian     │ Little     │
 │  ├────────────┼────────────┤
 │  │ ABI        │ System V   │
 │  ├────────────┼────────────┤
 │  │ Machine    │ x86-64     │
 │  ├────────────┼────────────┤
 │  │ Type       │ Executable │
 │  ├────────────┼────────────┤
 │  │ Entrypoint │ 4198400    │
 │  ╰────────────┴────────────╯
 │
 │  section #0 (address: 0x0)
 │   │
 │   │  Null
 │   ┴
 │
 │  section .shstrtab#1 (address: 0x0)
 │   │
 │   │  StringTable(
 │   │      ElfStringTable {
 │   │          strings: {
 │   │              0: "",
 │   │              1: ".text",
 │   │              7: ".text",
 │   │              13: ".comment",
 │   │              22: ".custom_messages",
 │   │              39: ".shstrtab",
 │   │          },
 │   │      },
 │   │  )
 │   ┴
 │
 │  section .text#2 (address: 0x401000)
 │   │
 │   │  Program(
 │   │      ElfProgramSection {
 │   │          perms: ElfPermissions(RX),
 │   │          deduplication: Disabled,
 │   │          raw: RawBytes {
 │   │                   ?0 ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 ?a ?b ?c ?d ?e ?f   (len: 0x31)
 │   │                 +-------------------------------------------------+
 │   │              0? | b8 04 00 00 00 bb 01 00 00 00 b9 00 00 40 00 ba | .............@..
 │   │              1? | 05 00 00 00 cd 80 b8 04 00 00 00 bb 01 00 00 00 | ................
 │   │              2? | b9 06 00 40 00 ba 08 00 00 00 cd 80 e9 00 00 00 | ...@............
 │   │              3? | 00                                              | .
 │   │          },
 │   │      },
 │   │  )
 │   ┴
 │
 │  section .text#3 (address: 0x401031)
 │   │
 │   │  Program(
 │   │      ElfProgramSection {
 │   │          perms: ElfPermissions(RX),
 │   │          deduplication: Disabled,
 │   │          raw: RawBytes {
 │   │                   ?0 ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 ?a ?b ?c ?d ?e ?f   (len: 0x38)
 │   │                 +-------------------------------------------------+
 │   │              0? | b8 04 00 00 00 bb 01 00 00 00 b9 0f 00 40 00 ba | .............@..
 │   │              1? | 07 00 00 00 cd 80 b8 04 00 00 00 bb 01 00 00 00 | ................
 │   │              2? | b9 06 00 40 00 ba 08 00 00 00 cd 80 b8 01 00 00 | ...@............
 │   │              3? | 00 bb 00 00 00 00 cd 80                         | ........
 │   │          },
 │   │      },
 │   │  )
 │   ┴
 │
 │  section .comment#4 (address: 0x0)
 │   │
 │   │  Program(
 │   │      ElfProgramSection {
 │   │          perms: ElfPermissions(),
 │   │          deduplication: ZeroTerminatedStrings,
 │   │          raw: RawBytes {
 │   │                   ?0 ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 ?a ?b ?c ?d ?e   (len: 0xf)
 │   │                 +----------------------------------------------+
 │   │              0? | 4c 69 6e 6b 65 72 3a 20 70 6c 69 6e 6b 79 00 | Linker: plinky.
 │   │          },
 │   │      },
 │   │  )
 │   ┴
 │
 │  section .custom_messages#5 (address: 0x400000)
 │   │
 │   │  Program(
 │   │      ElfProgramSection {
 │   │          perms: ElfPermissions(R),
 │   │          deduplication: ZeroTerminatedStrings,
 │   │          raw: RawBytes {
 │   │                   ?0 ?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 ?a ?b ?c ?d ?e ?f   (len: 0x17)
 │   │                 +-------------------------------------------------+
 │   │              0? | 48 65 6c 6c 6f 00 20 77 6f 72 6c 64 21 0a 00 47 | Hello. world!..G
 │   │              1? | 6f 6f 64 62 79 65 00                            | oodbye.
 │   │          },
 │   │      },
 │   │  )
 │   ┴
 │
 │    Segments:
 │  ╭───────────┬───────┬──────────┬────────────────────╮
 │  │ Type      │ Perms │ Aligment │ Content            │
 │  ├───────────┼───────┼──────────┼────────────────────┤
 │  │ Load      │ R     │ 0x1000   │ .custom_messages#5 │
 │  ├───────────┼───────┼──────────┼────────────────────┤
 │  │ Load      │ R X   │ 0x1000   │ .text#2, .text#3   │
 │  ├───────────┼───────┼──────────┼────────────────────┤
 │  │ GNU stack │ RW    │ 0x1      │ -                  │
 │  ╰───────────┴───────┴──────────┴────────────────────╯
 ┴




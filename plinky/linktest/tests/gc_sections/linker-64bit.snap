---
source: plinky/linktest/harness/tests.rs
---
linking exited with exit status: 0

no stdout present

=== stderr ===
debug print: loaded object
 │
 │  class: Elf64, endian: Little, abi: SystemV, machine: X86_64
 │
 │  section .comment#6 (no perms) in foo.o
 │   │
 │   │  zero-terminated strings should be deduplicated
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 53 61 6d 70 6c 65 20 63 6f 6d 6d 65 6e 74 00 │ Sample comment. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .comment#13 (no perms) in <plinky>
 │   │
 │   │  zero-terminated strings should be deduplicated
 │   │
 │   │  ╭──────────────────────────────────────────────┬─────────────────╮
 │   │  │ 4c 69 6e 6b 65 72 3a 20 70 6c 69 6e 6b 79 00 │ Linker: plinky. │
 │   │  ╰──────────────────────────────────────────────┴─────────────────╯
 │   ┴
 │
 │  section .rodata.name#4 (perms: r) in foo.o
 │   │
 │   │  ╭──────────────────────┬─────────╮
 │   │  │ 50 69 65 74 72 6f 00 │ Pietro. │
 │   │  ╰──────────────────────┴─────────╯
 │   ┴
 │
 │  section .rodata.surname#5 (perms: r) in foo.o
 │   │
 │   │  ╭──────────────────────┬─────────╮
 │   │  │ 41 6c 62 69 6e 69 00 │ Albini. │
 │   │  ╰──────────────────────┴─────────╯
 │   ┴
 │
 │  section .text#1 (perms: rx) in foo.o
 │   │
 │   │  ╭────────────────┬───────╮
 │   │  │ e9 00 00 00 00 │ ..... │
 │   │  ╰────────────────┴───────╯
 │   │
 │   │    Relocations:
 │   │  ╭─────────────┬───────────────────────┬────────┬────────────────────╮
 │   │  │ Type        │ Symbol                │ Offset │ Addend             │
 │   │  ├─────────────┼───────────────────────┼────────┼────────────────────┤
 │   │  │ X86_64_PC32 │ <section .text.foo#2> │ 0x1    │ 0xfffffffffffffffc │
 │   │  ╰─────────────┴───────────────────────┴────────┴────────────────────╯
 │   ┴
 │
 │  section .text.bar#3 (perms: r) in foo.o
 │   │
 │   │  ╭────────────────┬───────╮
 │   │  │ b8 00 00 00 00 │ ..... │
 │   │  ╰────────────────┴───────╯
 │   │
 │   │    Relocations:
 │   │  ╭───────────┬─────────────────────────────┬────────┬────────╮
 │   │  │ Type      │ Symbol                      │ Offset │ Addend │
 │   │  ├───────────┼─────────────────────────────┼────────┼────────┤
 │   │  │ X86_64_32 │ <section .rodata.surname#5> │ 0x1    │ 0x0    │
 │   │  ╰───────────┴─────────────────────────────┴────────┴────────╯
 │   ┴
 │
 │  section .text.foo#2 (perms: r) in foo.o
 │   │
 │   │  ╭────────────────┬───────╮
 │   │  │ b8 00 00 00 00 │ ..... │
 │   │  ╰────────────────┴───────╯
 │   │
 │   │    Relocations:
 │   │  ╭───────────┬──────────────────────────┬────────┬────────╮
 │   │  │ Type      │ Symbol                   │ Offset │ Addend │
 │   │  ├───────────┼──────────────────────────┼────────┼────────┤
 │   │  │ X86_64_32 │ <section .rodata.name#4> │ 0x1    │ 0x0    │
 │   │  ╰───────────┴──────────────────────────┴────────┴────────╯
 │   ┴
 │
 │    Symbols:
 │  ╭─────────────────────────────┬─────────┬────────┬────────────┬─────────────────────────╮
 │  │ Name                        │ Type    │ Source │ Visibility │ Value                   │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <symbol#2>                  │ none    │ foo.o  │ local      │ <undefined>             │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <section .text#1>           │ section │ foo.o  │ local      │ .text#1 + 0x0           │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <section .text.foo#2>       │ section │ foo.o  │ local      │ .text.foo#2 + 0x0       │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <section .text.bar#3>       │ section │ foo.o  │ local      │ .text.bar#3 + 0x0       │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <section .rodata.name#4>    │ section │ foo.o  │ local      │ .rodata.name#4 + 0x0    │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <section .rodata.surname#5> │ section │ foo.o  │ local      │ .rodata.surname#5 + 0x0 │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ <section .comment#6>        │ section │ foo.o  │ local      │ .comment#6 + 0x0        │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ _start#1                    │ none    │ foo.o  │ global     │ .text#1 + 0x0           │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ excluded#11                 │ none    │ foo.o  │ local      │ .text.bar#3 + 0x0       │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ name#12                     │ none    │ foo.o  │ local      │ .rodata.name#4 + 0x0    │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ sample#10                   │ none    │ foo.o  │ local      │ .text.foo#2 + 0x0       │
 │  ├─────────────────────────────┼─────────┼────────┼────────────┼─────────────────────────┤
 │  │ surname#13                  │ none    │ foo.o  │ local      │ .rodata.surname#5 + 0x0 │
 │  ╰─────────────────────────────┴─────────┴────────┴────────────┴─────────────────────────╯
 ┴

debug print: garbage collector outcome
 │
 │    Removed sections:
 │  ╭───────────────────┬────────╮
 │  │ Section name      │ Source │
 │  ├───────────────────┼────────┤
 │  │ .text.bar#3       │ foo.o  │
 │  ├───────────────────┼────────┤
 │  │ .rodata.surname#5 │ foo.o  │
 │  ╰───────────────────┴────────╯
 ┴

debug print: object after relocations are applied
 │
 │  class: Elf64, endian: Little, abi: SystemV, machine: X86_64
 │
 │  section .comment#14 (no perms) in mix of foo.o and <plinky>
 │   │
 │   │  zero-terminated strings should be deduplicated
 │   │
 │   │  not allocated in the resulting memory
 │   │
 │   │  ╭─────────────────────────────────────────────────┬──────────────────╮
 │   │  │ 53 61 6d 70 6c 65 20 63 6f 6d 6d 65 6e 74 00 4c │ Sample comment.L │
 │   │  │ 69 6e 6b 65 72 3a 20 70 6c 69 6e 6b 79 00       │ inker: plinky.   │
 │   │  ╰─────────────────────────────────────────────────┴──────────────────╯
 │   ┴
 │
 │  section .rodata.name#4 (perms: r) in foo.o
 │   │
 │   │  address: 0x400005
 │   │
 │   │  ╭──────────────────────┬─────────╮
 │   │  │ 50 69 65 74 72 6f 00 │ Pietro. │
 │   │  ╰──────────────────────┴─────────╯
 │   ┴
 │
 │  section .text#1 (perms: rx) in foo.o
 │   │
 │   │  address: 0x401000
 │   │
 │   │  ╭────────────────┬───────╮
 │   │  │ e9 fb ef ff ff │ ..... │
 │   │  ╰────────────────┴───────╯
 │   ┴
 │
 │  section .text.foo#2 (perms: r) in foo.o
 │   │
 │   │  address: 0x400000
 │   │
 │   │  ╭────────────────┬───────╮
 │   │  │ b8 05 00 40 00 │ ...@. │
 │   │  ╰────────────────┴───────╯
 │   ┴
 │
 │    Symbols:
 │  ╭──────────────────────────┬─────────┬────────┬────────────┬──────────────────────╮
 │  │ Name                     │ Type    │ Source │ Visibility │ Value                │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ <symbol#2>               │ none    │ foo.o  │ local      │ <undefined>          │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ <section .text#1>        │ section │ foo.o  │ local      │ .text#1 + 0x0        │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ <section .text.foo#2>    │ section │ foo.o  │ local      │ .text.foo#2 + 0x0    │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ <section .rodata.name#4> │ section │ foo.o  │ local      │ .rodata.name#4 + 0x0 │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ <section .comment#6>     │ section │ foo.o  │ local      │ .comment#6 + 0x0     │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ _start#1                 │ none    │ foo.o  │ global     │ .text#1 + 0x0        │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ name#12                  │ none    │ foo.o  │ local      │ .rodata.name#4 + 0x0 │
 │  ├──────────────────────────┼─────────┼────────┼────────────┼──────────────────────┤
 │  │ sample#10                │ none    │ foo.o  │ local      │ .text.foo#2 + 0x0    │
 │  ╰──────────────────────────┴─────────┴────────┴────────────┴──────────────────────╯
 ┴



